<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: public/js/video-service.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: public/js/video-service.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Classe VideoService
 *
 * Gère l'accès à la caméra et au microphone de l'utilisateur,
 * et intègre la vidéo dans l'interface. Permet également de définir
 * un point d'entrée pour gérer les événements vidéo via Socket.IO.
 */
class VideoService {
	/**
	 * Constructeur de la classe VideoService
	 * @param {Object} socketService - Instance du service de socket pour la communication en temps réel
	 */
	constructor(socketService) {
		// Stocke la référence au service socket
		this.socket = socketService;

		// Stocke le flux média local (caméra/micro)
		this.localStream = null;

		// Lance la capture du flux média (caméra/micro)
		this.initializeMedia();

		// Exemple de gestion d'un événement "video" reçu via Socket.IO
		socketService.socket.on("video", () => {
			console.log("video");
		});
	}

	/**
	 * Demande l'autorisation d'utiliser la caméra et le micro via l'API WebRTC
	 * Crée un élément &lt;video> pour afficher le flux local
	 * @returns {boolean} Indique si l'accès au média a été réussi ou non
	 */
	async initializeMedia() {
		try {
			// Demande l'accès à la caméra et au micro
			this.localStream = await navigator.mediaDevices.getUserMedia({
				video: true,
				audio: true,
			});

			// Crée un élément vidéo pour lire le flux local
			const localVideo = document.createElement("video");
			localVideo.autoplay = true; // Lance la lecture automatiquement
			localVideo.srcObject = this.localStream; // Associe le flux média à la source vidéo
			localVideo.muted = true; // Coupe le son local pour éviter l'écho

			// Ajoute la balise vidéo dans l'élément DOM avec l'ID "videos"
			document.getElementById("videos").appendChild(localVideo);

			return true;
		} catch (err) {
			// En cas d'erreur (refus d'accès ou autre)
			console.error("Erreur accès média:", err);
			return false;
		}
	}

	/**
	 * Stoppe la capture de la caméra/micro
	 * (Peut être implémenté en arrêtant les tracks du localStream)
	 */
	stop() {
		// À implémenter : arrête les pistes (audio et vidéo) du localStream
		// Exemple :
		// if (this.localStream) {
		//     this.localStream.getTracks().forEach(track => track.stop());
		// }
	}
}

export default VideoService;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MapService.html">MapService</a></li><li><a href="SocketService.html">SocketService</a></li><li><a href="VideoService.html">VideoService</a></li></ul><h3>Global</h3><ul><li><a href="global.html#PORT">PORT</a></li><li><a href="global.html#Reset">Reset</a></li><li><a href="global.html#UserService">UserService</a></li><li><a href="global.html#addUser">addUser</a></li><li><a href="global.html#app">app</a></li><li><a href="global.html#buildLogMessage">buildLogMessage</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#formElement">formElement</a></li><li><a href="global.html#getUser">getUser</a></li><li><a href="global.html#getUsers">getUsers</a></li><li><a href="global.html#handleChatMessage">handleChatMessage</a></li><li><a href="global.html#handleDisconnect">handleDisconnect</a></li><li><a href="global.html#handleJoin">handleJoin</a></li><li><a href="global.html#info">info</a></li><li><a href="global.html#io">io</a></li><li><a href="global.html#log">log</a></li><li><a href="global.html#logger">logger</a></li><li><a href="global.html#messageSocketTypes">messageSocketTypes</a></li><li><a href="global.html#outputLog">outputLog</a></li><li><a href="global.html#plus">plus</a></li><li><a href="global.html#removeUser">removeUser</a></li><li><a href="global.html#sendMessage">sendMessage</a></li><li><a href="global.html#server">server</a></li><li><a href="global.html#terminalColor">terminalColor</a></li><li><a href="global.html#username">username</a></li><li><a href="global.html#users">users</a></li><li><a href="global.html#warn">warn</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Feb 10 2025 01:26:50 GMT+0100 (heure normale d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
